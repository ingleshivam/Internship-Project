@model PreviousWorkVM
@*@{
    ViewBag.Title = "ADMIN | ADD CATEGORY";
    ViewBag.MainState = "active";
    ViewBag.CategoryState = "active";
}*@
<div class="col-lg-12">
    <div class="card">
@*        asp-action="Create" method="Post"*@
        <div class="card-body">
            <h5 class="card-title">Add Previous Work</h5>
            <form  class="row g-3">
                @for(int i=1;i<=5;i++){
                    <div class="row">
                        <div class="col-2">
                            <label class="form-label">Work Title</label>
                            <input asp-for="WorkTitle" id="WorkTitle_@i" class="form-control" /> 
                            <span asp-validation-for="WorkTitle" class="text-danger"></span>
                        </div>

                        <div class="col-2">
                            <label class="form-label">Work Description</label>
                            <input asp-for="WorkDescription" id="WorkDescription_@i" class="form-control" />
                            <span asp-validation-for="WorkDescription" class="text-danger"></span>
                        </div>

                        <div class="col-2">
                            <label class="form-label">Duration</label>
                            <input asp-for="Duration" id="Duration_@i" class="form-control" />
                            <span asp-validation-for="Duration" class="text-danger"></span>
                        </div>

                        <div class="col-2">
                            <label class="form-label">Tentative Budget</label>
                            <input asp-for="TentativeBudget" id="TentativeBudget_@i" class="form-control" />
                            <span asp-validation-for="TentativeBudget" class="text-danger"></span>
                        </div>

@*                        <div class="col-2">
                            <label class="form-label">User Name</label>
                            <select asp-for="UserID" asp-items="@ViewBag.UserID" id="UserID_@i" class="form-select">
                                <option>Select User</option>
                            </select>
                            <span asp-validation-for="UserID" class="text-danger"></span>
                        </div>*@
                    </div>

                }
 
                <div>
                    <button type="button" id="submitBtn"class="btn btn-primary btn-sm">Create</button>
                </div>
                @if (ViewBag.Message != null)
                {
                    <h6 class="text-info fw-bold">@ViewBag.Message</h6>
                }
            </form>
        </div>
    </div>
</div>

<script type="text/javascript">
    $(function () {
        //var PreviousWorkVM = {};
        var PreviousWorkVM = new Array();
        $("#submitBtn").click(function () {
            for(var i=1;i<=5;i++){

                //var workT = $("#WorkTitle_" + i).val();
                //var wordD = $("#WorkDescription_" + i).val();
                //var Dur = $("#Duration_" + i).val();
                //var Ten = $("#TentativeBudget_" + i).val();

                //var PreviousWorkVM = {
                //    WorkTitle: workT,
                //    WorkDescription: wordD,
                //    Duration: Dur,
                //    TentativeBudget: Ten
                //}

                var PreviousWork = {};

                PreviousWorkVM.WorkTitle = $("#WorkTitle_" + i).val();
                PreviousWorkVM.WorkDescription = $("#WorkDescription_"+ i).val();
                PreviousWorkVM.Duration = $("#Duration_" + i).val();
                PreviousWorkVM.TentativeBudget = $("#TentativeBudget_" + i).val();

                PreviousWorkVM.push(PreviousWork);
                console.log(PreviousWorkVM);

                $.ajax({
                    url: "/AdminArea/PreviousWork/InsertData",
                    type: "POST",
                    contentType: "application/json",
                    datatype: "json",
                    data: JSON.stringify(PreviousWorkVM),
                    success: function (result) {
                        alert(JSON.stringify(result));
                    },
                    error: function (err) {
                        alert(JSON.stringify(err));
                    }
                });
            }
        });

    });
</script>
